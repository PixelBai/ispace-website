import{u as U,g as se,h as te,i as B,j as ie,k as le,t as ae,l as ue,m as $,n as R,p as ne,w as O,q as t,v as me,R as M,x as re,y as oe,z as de,A as ce,B as ge,C as he,D as pe,E as ye,F as ve,G as ke,H as be,I as T,J as j,K as fe,L as x,M as we}from"./app-D1qWyMTn.js";const He=["/","/about.html","/release.html","/guide/guide.html","/guide/community/database/Elasticsearch.html","/guide/community/database/MongoDB.html","/guide/community/database/Mysql.html","/guide/community/database/","/guide/community/database/Redis.html","/guide/community/mirco/","/guide/community/mirco/consul.html","/guide/community/mirco/gprc.html","/guide/community/mirco/kong.html","/guide/community/mirco/protoc.html","/guide/community/pkgs/","/guide/essential/base/0.ready.html","/guide/essential/base/1.grammer.html","/guide/essential/base/10.datatype.html","/guide/essential/base/30.constant.html","/guide/essential/base/40.variable.html","/guide/essential/base/45.inout.html","/guide/essential/base/52.condition.html","/guide/essential/base/55.loop.html","/guide/essential/base/60.slice.html","/guide/essential/base/62.string.html","/guide/essential/base/65.map.html","/guide/essential/base/67.pointer.html","/guide/essential/base/69.func.html","/guide/essential/base/75.struct.html","/guide/essential/base/80.method.html","/guide/essential/base/","/guide/essential/impl/","/guide/essential/senior/100.io.html","/guide/essential/senior/105.reflect.html","/guide/essential/senior/110.concurrency.html","/guide/essential/senior/115.module.html","/guide/essential/senior/120.test.html","/guide/essential/senior/135.cgo.html","/guide/essential/senior/140.pprof.html","/guide/essential/senior/85.interface.html","/guide/essential/senior/90.generic.html","/guide/essential/senior/91.iterator.html","/guide/essential/senior/92.types.html","/guide/essential/senior/95.error.html","/guide/essential/senior/996.postscript.html","/guide/essential/senior/","/guide/essential/std/0.intro.html","/guide/essential/std/","/guide/essential/std/encode.html","/guide/essential/std/flag.html","/guide/essential/std/http.html","/guide/essential/std/log.html","/guide/essential/std/math.html","/guide/essential/std/net.html","/guide/essential/std/sort.html","/guide/essential/std/strconv.html","/guide/essential/std/strings.html","/guide/essential/std/template.html","/guide/essential/std/time.html","/guide/essential/std/unicode.html","/guide/essential/std/unsafe.html","/guide/community/pkgs/auth/Casbin.html","/guide/community/pkgs/auth/","/guide/community/pkgs/auth/jwt.html","/guide/community/pkgs/config/","/guide/community/pkgs/config/Viper.html","/guide/community/pkgs/container/DockerAPI.html","/guide/community/pkgs/container/","/guide/community/pkgs/cross_anguage/","/guide/community/pkgs/cross_anguage/gopher-lua.html","/guide/community/pkgs/data_process/Cast.html","/guide/community/pkgs/data_process/","/guide/community/pkgs/data_process/copier.html","/guide/community/pkgs/data_process/go-ini.html","/guide/community/pkgs/data_process/size.html","/guide/community/pkgs/di/","/guide/community/pkgs/di/wire.html","/guide/community/pkgs/draw/","/guide/community/pkgs/draw/gg.html","/guide/community/pkgs/logs/","/guide/community/pkgs/logs/Zap.html","/guide/community/pkgs/math/","/guide/community/pkgs/math/decimal.html","/guide/community/pkgs/orm/","/guide/community/pkgs/orm/gorm.html","/guide/community/pkgs/syscall/","/guide/community/pkgs/syscall/gopsutils.html","/guide/community/pkgs/tools/","/guide/community/pkgs/tools/lancet.html","/guide/community/pkgs/validate/","/guide/community/pkgs/validate/Validator.html","/guide/community/pkgs/web/HttpRouter.html","/guide/community/pkgs/web/","/guide/community/pkgs/web/gin.html","/guide/community/pkgs/web/swag.html","/guide/essential/impl/ds/0.slice.html","/guide/essential/impl/ds/1.map.html","/guide/essential/impl/ds/10.syncmap.html","/guide/essential/impl/ds/2.string.html","/guide/essential/impl/ds/6.channel.html","/guide/essential/impl/ds/6.select.html","/guide/essential/impl/err/3.nil.html","/guide/essential/impl/err/4.defer.html","/guide/essential/impl/err/5.panic.html","/guide/essential/impl/network/0.netpoll.html","/guide/essential/impl/runtime/15.sysmon.html","/guide/essential/impl/runtime/7.gmp.html","/guide/essential/impl/runtime/8.mem.html","/guide/essential/impl/runtime/9.gc.html","/guide/essential/impl/sync/0.mutex.html","/guide/essential/impl/sync/15.cond.html","/guide/essential/impl/sync/2.once.html","/guide/essential/impl/sync/20.context.html","/guide/essential/impl/sync/5.wg.html","/404.html","/guide/","/guide/community/","/guide/essential/","/guide/essential/impl/ds/","/guide/essential/impl/err/","/guide/essential/impl/network/","/guide/essential/impl/runtime/","/guide/essential/impl/sync/"],Re="SLIMSEARCH_QUERY_HISTORY",y=U(Re,[]),xe=()=>{const{queryHistoryCount:i}=x,l=i>0;return{enabled:l,queryHistories:y,addQueryHistory:a=>{l&&(y.value=Array.from(new Set([a,...y.value.slice(0,i-1)])))},removeQueryHistory:a=>{y.value=[...y.value.slice(0,a),...y.value.slice(a+1)]}}},A=i=>He[i.id]+("anchor"in i?`#${i.anchor}`:""),qe="SLIMSEARCH_RESULT_HISTORY",{resultHistoryCount:P}=x,v=U(qe,[]),Qe=()=>{const i=P>0;return{enabled:i,resultHistories:v,addResultHistory:l=>{if(i){const a={link:A(l),display:l.display};"header"in l&&(a.header=l.header),v.value=[a,...v.value.slice(0,P-1)]}},removeResultHistory:l=>{v.value=[...v.value.slice(0,l),...v.value.slice(l+1)]}}},Ce=i=>{const l=ce(),a=B(),q=ge(),n=$(0),b=R(()=>n.value>0),h=he([]);return pe(()=>{const{search:p,terminate:Q}=ye(),k=fe(r=>{const{resultsFilter:f=m=>m,querySplitter:E,suggestionsFilter:C,...S}=l.value;r?(n.value+=1,p(r,a.value,S).then(m=>f(m,r,a.value,q.value)).then(m=>{n.value-=1,h.value=m}).catch(m=>{console.warn(m),n.value-=1,n.value||(h.value=[])})):h.value=[]},x.searchDelay-x.suggestDelay,{maxWait:5e3});O([i,a],([r])=>{k(r.join(" "))},{immediate:!0}),ve(()=>{Q()})}),{isSearching:b,results:h}};var Le=se({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(i,{emit:l}){const a=te(),q=B(),n=ie(le),{enabled:b,addQueryHistory:h,queryHistories:p,removeQueryHistory:Q}=xe(),{enabled:k,resultHistories:r,addResultHistory:f,removeResultHistory:E}=Qe(),C=b||k,S=ae(i,"queries"),{results:m,isSearching:V}=Ce(S),u=ue({isQuery:!0,index:0}),c=$(0),g=$(0),F=R(()=>C&&(p.value.length>0||r.value.length>0)),L=R(()=>m.value.length>0),D=R(()=>m.value[c.value]||null),Y=()=>{const{isQuery:e,index:s}=u;s===0?(u.isQuery=!e,u.index=e?r.value.length-1:p.value.length-1):u.index=s-1},z=()=>{const{isQuery:e,index:s}=u;s===(e?p.value.length-1:r.value.length-1)?(u.isQuery=!e,u.index=0):u.index=s+1},G=()=>{c.value=c.value>0?c.value-1:m.value.length-1,g.value=D.value.contents.length-1},J=()=>{c.value=c.value<m.value.length-1?c.value+1:0,g.value=0},K=()=>{g.value<D.value.contents.length-1?g.value+=1:J()},W=()=>{g.value>0?g.value-=1:G()},_=e=>e.map(s=>we(s)?s:t(s[0],s[1])),Z=e=>{if(e.type==="customField"){const s=ke[e.index]||"$content",[o,H=""]=be(s)?s[q.value].split("$content"):s.split("$content");return e.display.map(d=>t("div",_([o,...d,H])))}return e.display.map(s=>t("div",_(s)))},w=()=>{c.value=0,g.value=0,l("updateQuery",""),l("close")},N=()=>b?t("ul",{class:"slimsearch-result-list"},t("li",{class:"slimsearch-result-list-item"},[t("div",{class:"slimsearch-result-title"},n.value.queryHistory),p.value.map((e,s)=>t("div",{class:["slimsearch-result-item",{active:u.isQuery&&u.index===s}],onClick:()=>{l("updateQuery",e)}},[t(T,{class:"slimsearch-result-type"}),t("div",{class:"slimsearch-result-content"},e),t("button",{class:"slimsearch-remove-icon",innerHTML:j,onClick:o=>{o.preventDefault(),o.stopPropagation(),Q(s)}})]))])):null,X=()=>k?t("ul",{class:"slimsearch-result-list"},t("li",{class:"slimsearch-result-list-item"},[t("div",{class:"slimsearch-result-title"},n.value.resultHistory),r.value.map((e,s)=>t(M,{to:e.link,class:["slimsearch-result-item",{active:!u.isQuery&&u.index===s}],onClick:()=>{w()}},()=>[t(T,{class:"slimsearch-result-type"}),t("div",{class:"slimsearch-result-content"},[e.header?t("div",{class:"content-header"},e.header):null,t("div",e.display.map(o=>_(o)).flat())]),t("button",{class:"slimsearch-remove-icon",innerHTML:j,onClick:o=>{o.preventDefault(),o.stopPropagation(),E(s)}})]))])):null;return ne("keydown",e=>{if(i.isFocusing){if(L.value){if(e.key==="ArrowUp")W();else if(e.key==="ArrowDown")K();else if(e.key==="Enter"){const s=D.value.contents[g.value];h(i.queries.join(" ")),f(s),a.push(A(s)),w()}}else if(k){if(e.key==="ArrowUp")Y();else if(e.key==="ArrowDown")z();else if(e.key==="Enter"){const{index:s}=u;u.isQuery?(l("updateQuery",p.value[s]),e.preventDefault()):(a.push(r.value[s].link),w())}}}}),O([c,g],()=>{var e;(e=document.querySelector(".slimsearch-result-list-item.active .slimsearch-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>t("div",{class:["slimsearch-result-wrapper",{empty:i.queries.length?!L.value:!F.value}],id:"slimsearch-results"},i.queries.length?V.value?t(me,{hint:n.value.searching}):L.value?t("ul",{class:"slimsearch-result-list"},m.value.map(({title:e,contents:s},o)=>{const H=c.value===o;return t("li",{class:["slimsearch-result-list-item",{active:H}]},[t("div",{class:"slimsearch-result-title"},e||n.value.defaultTitle),s.map((d,ee)=>{const I=H&&g.value===ee;return t(M,{to:A(d),class:["slimsearch-result-item",{active:I,"aria-selected":I}],onClick:()=>{h(i.queries.join(" ")),f(d),w()}},()=>[d.type==="text"?null:t(d.type==="title"?re:d.type==="heading"?oe:de,{class:"slimsearch-result-type"}),t("div",{class:"slimsearch-result-content"},[d.type==="text"&&d.header?t("div",{class:"content-header"},d.header):null,t("div",Z(d))])])})])})):n.value.emptyResult:C?F.value?[N(),X()]:n.value.emptyHistory:n.value.emptyResult)}});export{Le as default};
